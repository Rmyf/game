<html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="css/style.css" rel="stylesheet" type="text/css">



    <title>MarioGame</title>
</head>

<audio src="sound/overworld.mp3" controls autoplay hidden loop></audio>

<body>

    <header>
        <img id="avatarmario" src="images/iconmario.png">
        <section>
            <div id="health1">
            </div>
        </section>
        <img id="vs" src="images/vs.png" alt="VS">

        <section>
            <div id="health2">
            </div>
        </section>
        <div id="vs">
            <img id="avatarwario" src="images/iconwario.png">
        </div>
    </header>
    <div class="fireball"></div>
    <div class="littlefire"></div>
    <div class="lightning">
        <img src="images/wario_lightning.png" alt="lightning">
    </div>
    <div class="littlelightning">
        <img src="images/littlelightning.png" alt="lightning">
    </div>

    <main>

        <div class="gameover">
            <h1 class="blink">GAME OVER</h1>
        </div>

        <div class="persomario"></div>
        <div class="persowario"></div>

    </main>


    <footer>
        <input id="buttmario" type="button" value="A">
        <input id="buttsupmario" type="button" value="B">
        <input id="buttwario" type="button" value="A">
        <input id="buttsupwario" type="button" value="B">
    </footer>

</body>

<script>
    "use strict";

    let buttmario = document.getElementById('buttmario');
    let buttwario = document.getElementById('buttwario');


    let buttsupmario = document.getElementById('buttsupmario');
    let buttsupwario = document.getElementById('buttsupwario');




    const display = function() {

        let lifeWario = document.querySelector("#health2")
        lifeWario.style.width = (wario.vie * 4) + "px";

        let lifeMario = document.querySelector("#health1")
        lifeMario.style.width = (mario.vie * 4) + "px";
    }


    // get .health1
    // change .health1 content to match mario's health
    // get .health2
    // change .health2 content to match wario's health

    const attack = function(perso) {
        perso.vie -= 10;
        display();
        gameover();

    }
    const supattack = function(perso) {
        perso.vie -= 20;
        display();
        gameover();
    }


    let mario = {
        name: "Mario",
        vie: 100,
    };


    let wario = {
        name: "Wario",
        vie: 100,
    };


    // attack(wario);

    buttmario.addEventListener("click", function() {
        attack(wario)
        document.querySelector(".littlefire").style.display = "block";

        document.querySelector(".littlefire").style.animationName = "fire";
        document.querySelector(".littlefire").addEventListener("animationend", function() {
            document.querySelector(".littlefire").style.animationName = "";
        })


    });

    buttwario.addEventListener("click", function() {
        attack(mario)
        document.body.querySelector(".littlelightning").style.display = "block";
        setTimeout(function() {
            document.body.querySelector(".littlelightning").style.right = "80%";
        }, 40);
        document.querySelector(".littlelightning").addEventListener("transitionend", function() {
            document.querySelector(".littlelightning").style.display = "none";
            document.querySelector(".littlelightning").style.right = "15%";
        })

    });


    buttsupmario.addEventListener("click", function() {
        supattack(wario)
        document.querySelector(".fireball").style.display = "block";

        document.querySelector(".fireball").style.animationName = "ball";
        document.querySelector(".fireball").addEventListener("animationend", function() {
            document.querySelector(".fireball").style.animationName = "";
        })
    });

    buttsupwario.addEventListener("click", function() {
        supattack(mario)
        document.body.querySelector(".lightning").style.display = "block";
        setTimeout(function() {
            document.body.querySelector(".lightning").style.right = "80%";
        }, 40);
        document.querySelector(".lightning").addEventListener("transitionend", function() {
            document.querySelector(".lightning").style.display = "none";
            document.querySelector(".lightning").style.right = "15%";
        })

    });



    function gameover() {
        if (mario.vie <= 0 || wario.vie <= 0) {
            document.querySelector(".gameover").style.display = "flex";

        }
    }
</script>


</body>

</html>